# Парсер релевантности документов (НПА и Тех. документации)

Программа предназначена для автоматизации некоторых операций при проверке релевантности нормативной и технической документацией (СНИП, СанПин, ГОСТы ФЗ, и иные НПА) посредством обращения к данным из открытых источников в сети Интернет.

 Цели создания и реализации проекта: 
1) Упрощение процесса проверки статуса нормативной и технической документации;
2) Автоматизация как метод сокращения временных затрат на рутинные задачи;
3) Учебный проект, в процессе реализации которого кратко ознакомился с инструментарием python, методами работы с данными из сети Интернет + построение GUI на python.

# Установка и использование:
установить следующие программные элементы:
- python3
  - tkinter (библиотека для создания GUI)
  - selenium (программный проект для python, созданный для тестирования веб-ресурсов)
  - requsts (библиотека python для автоматизации работы с браузером)
  - bs4 (библиотека для парсинга данных из html-документа)
- браузер Google Chrome

Для Linux ubuntu и подобных: 
1) в терминале ввести: 
- sudo apt update
- sudo apt install python3-tk
- pip3 install selenium
- pip3 install requests

Для Windows: 
1) Установить интерпретатор python3 (https://www.python.org/)
2) в командной строке ввести:
- pip install selenium 
- pip install requests
(с подробным руководством можно ознакомиться в открытых источниках, например тут: https://habr.com/ru/post/248559/)
            иные модули могут быть установлены по умолчанию при условии установленного интерпретатора python3

"Программа" представляет собой совокупность 3 блоков:

1) Блок GUI и логика кнопок - отвечает за отображение элементов управления, а также системных сообщений;
2) Блок автоматизированной обработки запросов пользователя и работы с браузером - отвечает за работы направления элементов запроса пользователя в браузер. Работает с браузером "Google Chrome " (модуль selenium):
        
          def pool_in_line_brows(user_text):
              # далее вводится путь к драйверу. Его необходимо изменить вручную
              brows_driver = webdriver.Chrome('/home/nikita/project/Multiple_internet_requests_pp_p2/chromedriver')
              brows_driver.get(f'https://yandex.ru/search/?text={user_text}')
- скачать драйвер для соответствующей версии Google Chrome можно тут: https://chromedriver.chromium.org/downloads
скачанный файл нужно поместить в папку с проектом и указать полный путь в переменной 'brows_driver'

3) Блок автоматизированной обработки запросов пользователя и проверки релевантности (элементов запроса) в веб-справочно-правовом ресурсе (модуль requests и bs4):

            def featch_html(user_text):
               response = requests.get(f'https://beta.docs.cntd.ru/search?q={user_text}')
               if response.status_code == 200:
                    print(f'\nПолучение сведений о документе: {user_text}')
               else:
                    print(f'Ошибка соединения {response.status_code}')
               return response.text
           
           def parser(user_text):            
              soup = BeautifulSoup(featch_html(user_text), 'lxml')
              search_tag = soup.find_all('svg', class_='kIcon document-list_i_ic')
              if not search_tag:
                  res = 'Документ не обнаружен\n'
                  print(res)
              else:
                  res = search_tag[0]['title']
                  print(res)
              return res

**Для работы программы не было создано файла (.exe, .bs и пр.). Программа представляет собой скрипт, написанный в процедурном и функциональном стилях и для ее запуска не требуется дополнительных манипуляций, за исключением описанных выше.


# Запуск скрипта:
- Для Пользовталей Linux Ubuntu и подобных
1) Двойным кликом мыши запустить исполняемый файл "main.py"
 
  - или
 
2) в терминале (из каталога репозитория) ввести: ./main.py

- Для пользователей Windows: 

1) Правым кликом на файле main.py установить приложением по умолчанию интерпретатор python для открытия скрипта.
2) Двойным кликом по файлу main.py - запустить срипт

** предусмотренна версия для работы в терминале. Функционал такого скрипта ограничен парсингом данных веб-ресурса, без применения блока selenium.
# Макет интерфейса и элементов управления программой:

![image](https://user-images.githubusercontent.com/68808458/113596525-1e48e100-9643-11eb-99c3-8539f407af8d.png)

# Пошаговый алгоритм работы: 

Шаг 1) 
"Внесите разд-ль" - виджет поля ввода, для указания разделителя (вводится любой спец.символ (применимо указание кириллицы или любого другого символа) на усмотрение пользователя,  а также предусмотрен выбор из 4 возможных вариантов без применения ввода с клавиатуры;

![image](https://user-images.githubusercontent.com/68808458/112730099-af7fcf80-8f40-11eb-90cd-74f5f8d3eb16.png)

Шаг 2) 
"Сохранить" - виджет кнопки, для сохранения выбранного пользователем разделителя;
- при нажатии на кнопку "Сохранить"  - под кнопкой отобразиться сообщение о том, что разделитель сохранен программой в качестве конкретного символа

![image](https://user-images.githubusercontent.com/68808458/112730116-d0482500-8f40-11eb-8287-3b11e3590191.png)

Указание разделителя необходимо для корректного деления текста пользователя на элементы (подзапросы).

Шаг 3) 
"КОДЕКС" - виджет чекбокс, позволяющий запускать проверку релевантности технической и нормативной документации, вместо работы с браузером непосредственно пользователем.

![image](https://user-images.githubusercontent.com/68808458/112730123-dccc7d80-8f40-11eb-8af7-96fa7f8e214d.png)

Шаг 4)
"Внесите текста" - виджет поля ввода, куда пользователь вводит текст запросов, разделяемых выбранным на шаге 1 разделителем

"Найти" - виджет кнопки, запускающий работу функций программы

![image](https://user-images.githubusercontent.com/68808458/112730149-fa99e280-8f40-11eb-980d-637545763315.png)

После завершения сбора данных, программа в факультативном окне отобразит результаты: 

![image](https://user-images.githubusercontent.com/68808458/113598751-44bc4b80-9646-11eb-9ae4-2b9182b621ff.png)

** в факультативном окне доступна прокрутка вниз

В случае пропуска Шага 3 - пользователь будет поочередно направлять запросы посредством модуля selenium и иметь возможность работать с браузером Google Chrome, в новом окне браузера непосредственно.


# Важно
При работе с включенным флагом "КОДЕКС" - наиболее точные выходные данные зависят от точности передаваемых данных пользователем в виджет "Внесите текст"


В случае работы с браузером - запросы могут быть относительными, это не повлияет на работу программы.
